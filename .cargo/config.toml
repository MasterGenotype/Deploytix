# Build configuration
#
# GCC (glibc, dynamically linked):
#   cargo gcc-build         (alias below)
#   make gcc                (via Makefile)
#
# Portable / musl (statically linked, zero dynamic deps):
#   Prerequisites: apt install musl-tools
#                  rustup target add x86_64-unknown-linux-musl
#   cargo portable          (alias below)
#   make portable           (via Makefile)

[target.x86_64-unknown-linux-gnu]
linker = "gcc"

[target.x86_64-unknown-linux-musl]
linker = "musl-gcc"
rustflags = ["-C", "target-feature=+crt-static"]

[build]
# Uncomment to set a default target
# target = "x86_64-unknown-linux-gnu"
# target = "x86_64-unknown-linux-musl"

[alias]
# GCC / glibc build (dynamically linked)
gcc-build = "build --release --target x86_64-unknown-linux-gnu --bin deploytix"
# Portable musl build (statically linked); GUI excluded (needs X11/Wayland libs)
portable = "build --release --target x86_64-unknown-linux-musl --bin deploytix"
